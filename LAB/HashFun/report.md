# LAB2 HashFun 实验报告
by 郑劭轩 材91 2019011852

## 不同哈希策略的实现

### 针对ASCII字符的hash函数

我参考了讲义上的多项式法实现了针对ASCII字符的hash函数。
$$
hash(s) = \sum_{i=0}^{len} (int)s[i] \times a^i \mod N
$$
以上$a = 2^5= 32$，$N$为表长，(int)s[i]为ASCII字符对应的编码数字。

### 针对UTF-8字符的hash函数

长度在1~3字节的utf-8字符有以下特性：

- 1字节: 和ascii码相同，且最高位一定是0。长度不为1字节的utf-8字符，最高位一定是1。

- 2字节: 第一个字节最高三位一定是110，第二个字节最高两位一定是10。

- 3字节: 第一个字节最高四位一定是1110，第二、三个字节的最高两位一定是10。

因此，除去每个字节先导的标志位外，每个utf-8字符都对应于一个二进制串，因此也可对应于一个整数。考虑到这一点，同样可以利用多项式法针对utf8字符实现hash函数。

### 双向平方试探

在子类中声明一个静态变量`count`，用于记录试探次数。

试探次数为奇数时，为正向平方试探；偶数为反向平方试探。



### 公共溢出区

构造hashtable时，若检测到公共溢出区策略，则令内部表长加倍，多出的一倍表长为公共溢出区。第一次发生冲突时跳至公共溢出区起点，此后向后线性试探。



## 测试

构造的6种测例分别为：

- 大/小量的hdu/poj数据
- 高命中的hdu/poj数据

测试结构见txt文档。



## 分析结果

1. utf8哈希对utf数据效果更好，特化的数据减小了冲突的产生
2. 小规模数据时线性试探效果较好，数据规模大时双向平方试探更好。因为双向平方试探计算量大，在冲突少时难以体现优势。
3. 封闭散列更据优势。冲突较少时开放散列优势，冲突多时封闭散列优势。
4. 假设概率相等，散列较分散，有优势。但数据若有一定规律，容易造成聚集，导致效率降低。
5. 
